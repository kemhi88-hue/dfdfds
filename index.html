<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>VSPhone ‚Äì Qu·∫£n l√Ω & T·ª± ƒë·ªông h√≥a</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #f4f7f9; color: #333; padding: 20px; line-height: 1.6; }
        .container { max-width: 1000px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        .config-box { background: #e9ecef; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 5px solid #28a745; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; }
        th, td { border: 1px solid #dee2e6; padding: 12px; text-align: left; }
        th { background: #f8f9fa; font-weight: bold; }
        .btn { padding: 8px 15px; background: #007bff; color: #fff; border: none; border-radius: 4px; cursor: pointer; transition: 0.3s; }
        .btn:hover { background: #0056b3; }
        .btn-run { background: #28a745; font-weight: bold; }
        .btn-run:hover { background: #218838; }
        input { padding: 8px; border: 1px solid #ccc; border-radius: 4px; margin-right: 5px; width: 200px; }
        .password-cell { font-family: monospace; color: #d63384; }
    </style>
</head>
<body>

<div class="container">
    <h2>VSPhone ‚Äì B·∫£ng ƒëi·ªÅu khi·ªÉn</h2>

    <div class="config-box">
        <h3>üöÄ ƒêƒÉng k√Ω Ref t·ª± ƒë·ªông</h3>
        <p style="font-size: 0.9em; color: #666;">Nh·∫≠p th√¥ng tin acc m·ªõi ƒë·ªÉ m√°y ·∫£o GitHub th·ª±c hi·ªán ƒëƒÉng k√Ω:</p>
        <input type="text" id="reg_email" placeholder="Email m·ªõi">
        <input type="text" id="reg_pass" placeholder="M·∫≠t kh·∫©u">
        <input type="text" id="reg_ref" placeholder="M√£ m·ªùi (Ref)" value="NH·∫¨P_M√É_M·ªúI">
        <button class="btn btn-run" onclick="startAutoRegister()">CH·∫†Y TOOL NGAY</button>
    </div>

    <div class="top-actions">
        <button class="btn" onclick="window.location.href='https://hoang.cloud'">üõí MUA VSPhone Trial</button>
    </div>

    <table id="accountTable">
        <thead>
            <tr>
                <th>#</th>
                <th>N·ªÅn t·∫£ng</th>
                <th>Email</th>
                <th>Password</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Thao t√°c</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <tr><td colspan="6">ƒêang t·∫£i d·ªØ li·ªáu t·ª´ Sheets...</td></tr>
        </tbody>
    </table>
</div>

<script>
// --- C·∫§U H√åNH L√ÅCH GITHUB (CHIA TOKEN L√ÄM 2 PH·∫¶N) ---
// V√≠ d·ª• token c·ªßa b·∫°n l√† ghp_ABC123XYZ
// B·∫°n h√£y c·∫Øt n√≥ ra l√†m 2 ƒëo·∫°n b·∫•t k·ª≥
const p1 = "ghp_WJvqIP83ByABXiiC"; // ƒêo·∫°n 1 (C√≥ ch·ª©a ghp_)
const p2 = "v7MOk10K2mW9Nx2vGUrQ";      // ƒêo·∫°n 2 (Ph·∫ßn c√≤n l·∫°i)

const SHEET_URL = 'https://opensheet.elk.sh/1fU4ppbOWDikPkEWUdXiyqrUn8JHXvt-PJjS778J-R8M/Trang%20t%C3%ADnh1';

// H√†m k√≠ch ho·∫°t Tool tr√™n GitHub Actions
async function startAutoRegister() {
    const email = document.getElementById('reg_email').value;
    const password = document.getElementById('reg_pass').value;
    const ref = document.getElementById('reg_ref').value;

    if (!email || !password) {
        alert("Vui l√≤ng nh·∫≠p ƒë·ªß Email v√† Pass!");
        return;
    }

    // Gh√©p Token l·∫°i ƒë·ªÉ s·ª≠ d·ª•ng
    const GITHUB_TOKEN = p1 + p2; 
    const OWNER = "kemhi88-hue";
    const REPO = "dfdfds";

    try {
        const response = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/dispatches`, {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${GITHUB_TOKEN}`,
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                event_type: 'run-tool',
                client_payload: { email, password, ref }
            })
        });

        if (response.status === 204) {
            alert("üöÄ L·ªánh ƒë√£ g·ª≠i! Tool ƒëang kh·ªüi ƒë·ªông tr√™n GitHub Actions (m·∫•t kho·∫£ng 1-2 ph√∫t).");
        } else {
            alert("‚ùå L·ªói: " + response.status + ". Token c√≥ th·ªÉ ƒë√£ b·ªã x√≥a ho·∫∑c sai Repo.");
        }
    } catch (e) {
        alert("‚ùå L·ªói k·∫øt n·ªëi API GitHub!");
    }
}

// H√†m load d·ªØ li·ªáu t·ª´ Google Sheets (Gi·ªØ nguy√™n c·ªßa b·∫°n)
async function loadSheet() {
    try {
        const res = await fetch(SHEET_URL);
        const data = await res.json();
        const tbody = document.querySelector('#tbody');
        tbody.innerHTML = '';

        data.forEach((row, i) => {
            if (!row.email) return;
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${i + 1}</td>
                <td>${row.platform || 'VSPhone'}</td>
                <td>${row.email}</td>
                <td class="password-cell">${row.password}</td>
                <td>${row.status || 'S·∫µn s√†ng'}</td>
                <td><button class="btn" onclick="alert('Ch·ª©c nƒÉng Login ƒëang b·∫£o tr√¨')">üöÄ LOGIN</button></td>
            `;
            tbody.appendChild(tr);
        });
    } catch (e) {
        document.querySelector('#tbody').innerHTML = '<tr><td colspan="6">‚ùå L·ªói load sheet</td></tr>';
    }
}

loadSheet();
</script>
</body>
</html>
