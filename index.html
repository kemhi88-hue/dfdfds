<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>VSPhone ‚Äì Qu·∫£n l√Ω t√†i kho·∫£n</title>
<style>
body{font-family:Arial;background:#0f172a;color:#e5e7eb;padding:20px}
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{padding:10px;border-bottom:1px solid #334155}
th{background:#1e293b}
.btn{padding:6px 12px;background:#22c55e;color:#022c22;border-radius:6px;font-weight:bold;cursor:pointer}
.btn:hover{background:#16a34a}
.note{font-size:13px;color:#cbd5f5}
</style>
</head>
<body>

<h2>üì± VSPhone ‚Äì Qu·∫£n l√Ω t√†i kho·∫£n</h2>
<p class="note">Acc ƒë∆∞·ª£c l·∫•y tr·ª±c ti·∫øp t·ª´ Google Sheet (CSV)</p>

<table>
<thead>
<tr>
<th>N·ªÅn t·∫£ng</th>
<th>Email</th>
<th>Password</th>
<th>Tr·∫°ng th√°i</th>
<th>Login</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<script>
const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSyIS6NTiGHKz7BR5e8PEshKhRJWJcUC9bR8Gp5_WuqfsEGOwRdaARGcR-CwV7Dn_gUYRxcZ12Yb20I/pub?output=csv';

function parseCSVLine(line){
  const regex = /(".*?"|[^",]+)(?=\s*,|\s*$)/g;
  const result = line.match(regex);
  return result ? result.map(v => v.replace(/^"|"$/g, '').trim()) : [];
}

fetch(CSV_URL)
.then(r => r.text())
.then(text => {
  text = text.replace(/\uFEFF/g,'').trim();
  const lines = text.split(/\r?\n/);
  const tbody = document.getElementById('tbody');
  tbody.innerHTML = '';

  for(let i = 1; i < lines.length; i++){
    const cols = parseCSVLine(lines[i]);

    // üîí L·ªåC CH·∫∂T
    if(cols.length < 4) continue;
    if(!cols[1] || !cols[1].includes('@')) continue;

    const [platform,email,password,status] = cols;

    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${platform}</td>
      <td>${email}</td>
      <td>${password}</td>
      <td>${status}</td>
      <td>
        <button class="btn"
          onclick="openLogin('${email}','${password}')">
          LOGIN
        </button>
      </td>
    `;
    tbody.appendChild(tr);
  }
});

function openLogin(email, password){
  localStorage.setItem('vsp_email', email);
  localStorage.setItem('vsp_pass', password);
  window.open('https://cloud.vsphone.com/login', '_blank');
}
</script>

<p class="note" style="margin-top:15px">
Sau khi VSPhone m·ªü ‚Üí b·∫•m bookmarklet <b>VSPhone AUTO LOGIN</b>
</p>

</body>
</html>
